<div class="container">
  <h1>upload()</h1>
  <p class="signature">function upload(array $config): array</p>
  <h2>Description</h2>
  <div class="description">
    <p>Handles the uploading of an image file, performing checks based on specified validation rules, resizing the image, and optionally creating a thumbnail. It supports conditional uploads to module-specific directories and provides comprehensive file handling capabilities tailored for image management within applications.</p>
  </div>
  <h2>Parameters</h2>
  <table>
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>$config</td>
        <td>array</td>
        <td>Configuration array with settings for file destination, size limits, resizing dimensions, thumbnail creation, and more.  See Configuration Properties table below for full details.</td>
        <td>N/A</td>
      </tr>
    </tbody>
  </table>
  <h2>Configuration Properties</h2>
  <table class="properties-table">
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Type</th>
        <th>Description</th>
        <th>Example Values</th>
        <th>Default</th>
        <th>Required</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>$config['destination']</td>
        <td>string</td>
        <td>The directory path where the uploaded file will be saved.</td>
        <td>uploads/images/</td>
        <td>N/A</td>
        <td>Yes</td>
      </tr>
      <tr>
        <td>$config['max_width']</td>
        <td>int</td>
        <td>The maximum width of the image before resizing is necessary.</td>
        <td>1200</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['max_height']</td>
        <td>int</td>
        <td>The maximum height of the image before resizing is necessary.</td>
        <td>1200</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['resized_max_width']</td>
        <td>int</td>
        <td>The width to which the image should be resized if it exceeds the max dimensions.</td>
        <td>450</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['resized_max_height']</td>
        <td>int</td>
        <td>The height to which the image should be resized if it exceeds the max dimensions.</td>
        <td>450</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['thumbnail_dir']</td>
        <td>string</td>
        <td>The directory path where thumbnails should be saved, if thumbnail generation is enabled.</td>
        <td>uploads/thumbnails/</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['thumbnail_max_width']</td>
        <td>int</td>
        <td>The maximum width for thumbnails.</td>
        <td>120</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['thumbnail_max_height']</td>
        <td>int</td>
        <td>The maximum height for thumbnails.</td>
        <td>120</td>
        <td>N/A</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['upload_to_module']</td>
        <td>bool</td>
        <td>Whether to upload the file to a module-specific directory. If true, uses the module's asset directory.</td>
        <td>true/false</td>
        <td>false</td>
        <td>No</td>
      </tr>
      <tr>
        <td>$config['make_rand_name']</td>
        <td>bool</td>
        <td>Whether to generate a random filename for the uploaded file to avoid name conflicts.</td>
        <td>true/false</td>
        <td>false</td>
        <td>No</td>
      </tr>
    </tbody>
  </table>
  <h2>Return Value</h2>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>array</td>
        <td>An array containing details about the successfully uploaded file, including the file path, type, and size, along with the thumbnail path if a thumbnail was generated.</td>
      </tr>
    </tbody>
  </table>
  <h2>Exceptions</h2>
  <div class="exceptions">
    <p>Throws an <strong>Exception</strong> if there is an error during the upload process or if the specified directories are invalid.</p>
  </div>
  <h2>Example Usage</h2>
  <div class="example">
    <pre>
$config = [
    'destination' => 'images/uploads/',
    'max_width' => 1200,
    'max_height' => 1200,
    'resized_max_width' => 450,
    'resized_max_height' => 450,
    'thumbnail_dir' => 'images/thumbnails/',
    'thumbnail_max_width' => 120,
    'thumbnail_max_height' => 120,
    'upload_to_module' => true,
    'make_rand_name' => false
];

try {
    $file_info = $this->image->upload($config);
    echo 'File uploaded successfully. Details: ';
    print_r($file_info);
} catch (Exception $e) {
    echo 'Upload failed: ' . $e->getMessage();
}</pre>
  </div>
  <h2>Alternative Technique</h2>
  <div class="alternative">
    <p>The Trongate framework provides <code>upload_picture()</code> as a convenient alias to the <code>upload()</code> method specifically for image uploads. This method offers a semantically clear alternative for developers, ensuring the codebase remains expressive and maintainable while utilizing the same underlying functionality as <code>upload()</code>. It's especially useful in scenarios where the intent is explicitly to handle image files, making the code more readable at a glance.</p>

    <h3>Example Usage of Alternative Technique</h3>
    <pre>
  $config = [
      'destination' => 'images/uploads/',
      'max_width' => 1200,
      'max_height' => 1200,
      'resized_max_width' => 450,
      'resized_max_height' => 450,
      'thumbnail_dir' => 'images/thumbnails/',
      'thumbnail_max_width' => 120,
      'thumbnail_max_height' => 120,
      'upload_to_module' => true,
      'make_rand_name' => false
  ];

  try {
      $file_info = $this->upload_picture($config);
      echo 'File uploaded successfully using upload_picture. Details: ';
      print_r($file_info);
  } catch (Exception $e) {
      echo 'Upload failed: ' . $e->getMessage();
  }
    </pre>
  </div>
</div>